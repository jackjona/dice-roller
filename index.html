<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dice Roller</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Animation for the dice roll */
      .rolling {
        animation: roll 0.8s ease-in-out;
      }

      @keyframes roll {
        0% {
          transform: rotate(0deg) scale(0.8);
        }
        25% {
          transform: rotate(180deg) scale(1.1);
        }
        50% {
          transform: rotate(360deg) scale(1);
        }
        75% {
          transform: rotate(540deg) scale(0.9);
        }
        100% {
          transform: rotate(720deg) scale(1);
        }
      }

      .dice-face {
        transition: opacity 0.3s ease-in;
      }

      .dice-option-btn.active {
        background-color: white;
        color: #374151;
        box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1),
          0 1px 2px 0 rgba(0, 0, 0, 0.06);
      }

      html.dark .dice-option-btn.active {
        background-color: #374151;
        color: white;
      }

      .dice-option-btn {
        color: #6b7280;
      }

      html.dark .dice-option-btn {
        color: #9ca3af;
      }
    </style>
  </head>
  <body
    class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 flex flex-col items-center justify-center min-h-screen p-4 transition-colors duration-300"
  >
    <div class="w-full max-w-md text-center">
      <header class="mb-8">
        <h1
          class="text-4xl md:text-5xl font-bold text-gray-800 dark:text-white"
        >
          Dice Roller
        </h1>
        <p class="text-gray-500 dark:text-gray-400 mt-2">
          Select the number of dice and roll!
        </p>
      </header>

      <main class="flex flex-col items-center justify-center space-y-6">
        <div
          class="flex items-center space-x-2 bg-gray-200 dark:bg-gray-800 p-1 rounded-lg"
        >
          <button
            data-dice="1"
            class="dice-option-btn active px-4 py-2 text-sm font-semibold rounded-md transition-colors"
          >
            One Die
          </button>
          <button
            data-dice="2"
            class="dice-option-btn px-4 py-2 text-sm font-semibold rounded-md transition-colors"
          >
            Two Dice
          </button>
        </div>

        <div
          id="dice-display"
          class="flex items-center justify-center gap-4 min-h-[192px] md:min-h-[224px]"
        >
          <div
            id="dice-1"
            class="dice w-40 h-40 md:w-48 md:h-48 bg-white dark:bg-gray-800 rounded-2xl shadow-lg flex items-center justify-center cursor-pointer select-none transition-all duration-300"
          ></div>
          <div
            id="dice-2"
            class="dice w-32 h-32 md:w-36 md:h-36 bg-white dark:bg-gray-800 rounded-2xl shadow-lg flex items-center justify-center cursor-pointer select-none hidden transition-all duration-300"
          ></div>
        </div>

        <div
          id="total-display"
          class="h-10 text-2xl font-bold text-gray-700 dark:text-gray-300"
        ></div>

        <button
          id="roll-button"
          class="px-8 py-3 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:ring-opacity-75 transform transition-transform duration-150 hover:scale-105 active:scale-95"
        >
          Roll Dice
        </button>
      </main>

      <footer class="mt-12 text-center">
        <p class="text-sm text-gray-400 dark:text-gray-500">
          View the source
          <a href="https://github.com/jackjona/dice-roller" class="underline"
            >here.</a
          >
        </p>
      </footer>
    </div>

    <script>
      const rollButton = document.getElementById("roll-button");
      const diceDisplay = document.getElementById("dice-display");
      const dice1 = document.getElementById("dice-1");
      const dice2 = document.getElementById("dice-2");
      const totalDisplay = document.getElementById("total-display");
      const diceOptionBtns = document.querySelectorAll(".dice-option-btn");

      const diceContainers = [dice1, dice2];

      // SVGs for dice faces
      const diceFaces = [
        // Face 1
        `<svg class="dice-face w-24 h-24 text-gray-800 dark:text-gray-200" fill="currentColor" viewBox="0 0 20 20"><circle cx="10" cy="10" r="2"/></svg>`,
        // Face 2
        `<svg class="dice-face w-24 h-24 text-gray-800 dark:text-gray-200" fill="currentColor" viewBox="0 0 20 20"><circle cx="5.5" cy="5.5" r="2"/><circle cx="14.5" cy="14.5" r="2"/></svg>`,
        // Face 3
        `<svg class="dice-face w-24 h-24 text-gray-800 dark:text-gray-200" fill="currentColor" viewBox="0 0 20 20"><circle cx="5.5" cy="5.5" r="2"/><circle cx="10" cy="10" r="2"/><circle cx="14.5" cy="14.5" r="2"/></svg>`,
        // Face 4
        `<svg class="dice-face w-24 h-24 text-gray-800 dark:text-gray-200" fill="currentColor" viewBox="0 0 20 20"><circle cx="5.5" cy="5.5" r="2"/><circle cx="14.5" cy="5.5" r="2"/><circle cx="5.5" cy="14.5" r="2"/><circle cx="14.5" cy="14.5" r="2"/></svg>`,
        // Face 5
        `<svg class="dice-face w-24 h-24 text-gray-800 dark:text-gray-200" fill="currentColor" viewBox="0 0 20 20"><circle cx="5.5" cy="5.5" r="2"/><circle cx="14.5" cy="5.5" r="2"/><circle cx="10" cy="10" r="2"/><circle cx="5.5" cy="14.5" r="2"/><circle cx="14.5" cy="14.5" r="2"/></svg>`,
        // Face 6
        `<svg class="dice-face w-24 h-24 text-gray-800 dark:text-gray-200" fill="currentColor" viewBox="0 0 20 20"><circle cx="5.5" cy="5.5" r="2"/><circle cx="14.5" cy="5.5" r="2"/><circle cx="5.5" cy="10" r="2"/><circle cx="14.5" cy="10" r="2"/><circle cx="5.5" cy="14.5" r="2"/><circle cx="14.5" cy="14.5" r="2"/></svg>`,
      ];

      let numberOfDice = 1;
      let currentFaces = [5, 5]; // Start with face 6

      dice1.innerHTML = diceFaces[currentFaces[0]];
      dice2.innerHTML = diceFaces[currentFaces[1]];

      // Event listeners for dice option selection
      diceOptionBtns.forEach((btn) => {
        btn.addEventListener("click", () => {
          diceOptionBtns.forEach((b) => b.classList.remove("active"));
          btn.classList.add("active");

          numberOfDice = parseInt(btn.dataset.dice, 10);

          if (numberOfDice === 1) {
            dice1.classList.remove("w-32", "h-32", "md:w-36", "md:h-36");
            dice1.classList.add("w-40", "h-40", "md:w-48", "md:h-48");
            dice2.classList.add("hidden");
            totalDisplay.textContent = "";
          } else {
            dice1.classList.remove("w-40", "h-40", "md:w-48", "md:h-48");
            dice1.classList.add("w-32", "h-32", "md:w-36", "md:h-36");
            dice2.classList.remove("hidden");
          }
        });
      });

      const rollDice = () => {
        rollButton.disabled = true;
        rollButton.classList.add("opacity-50", "cursor-not-allowed");
        totalDisplay.textContent = "";

        const activeDice = diceContainers.slice(0, numberOfDice);

        activeDice.forEach((dice) => dice.classList.add("rolling"));

        let flickerInterval = setInterval(() => {
          activeDice.forEach((dice) => {
            const randomFace = Math.floor(Math.random() * 6);

            const svgSize = numberOfDice === 1 ? "w-24 h-24" : "w-20 h-20";
            dice.innerHTML = diceFaces[randomFace].replace(
              "w-24 h-24",
              svgSize
            );
          });
        }, 80);

        // Wait for the animation to finish
        setTimeout(() => {
          clearInterval(flickerInterval);

          let total = 0;

          activeDice.forEach((dice, index) => {
            dice.classList.remove("rolling");

            const result = Math.floor(Math.random() * 6); // 0-5
            currentFaces[index] = result;
            const svgSize = numberOfDice === 1 ? "w-24 h-24" : "w-20 h-20";
            dice.innerHTML = diceFaces[result].replace("w-24 h-24", svgSize);
            total += result + 1; // Add 1 because the index is 0-5
          });

          if (numberOfDice === 1) {
            totalDisplay.textContent = `Result: ${total}`;
          } else if (numberOfDice === 2) {
            totalDisplay.textContent = `Total: ${total}`;
          }

          rollButton.disabled = false;
          rollButton.classList.remove("opacity-50", "cursor-not-allowed");
        }, 800);
      };

      // Allow clicking to roll the dice
      rollButton.addEventListener("click", rollDice);
      diceDisplay.addEventListener("click", rollDice);
    </script>
  </body>
</html>
